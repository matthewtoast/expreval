/*!
 * expreval v0.0.0
 * (c) Matthew Trost
 * Released under the MIT License.
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("seedrandom"),require("zod")):"function"==typeof define&&define.amd?define(["exports","seedrandom","zod"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).expreval={},n.seedrandom,n.zod)}(this,(function(n,t,r){"use strict";function e(n){if(n&&n.__esModule)return n;var t=Object.create(null);return n&&Object.keys(n).forEach((function(r){if("default"!==r){var e=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,e.get?e:{enumerable:!0,get:function(){return n[r]}})}})),t.default=n,Object.freeze(t)}var u=e(t),i=function(){return i=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var u in t=arguments[r])Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=t[u]);return n},i.apply(this,arguments)};function o(n,t,r,e){return new(r||(r=Promise))((function(u,i){function o(n){try{c(e.next(n))}catch(n){i(n)}}function a(n){try{c(e.throw(n))}catch(n){i(n)}}function c(n){var t;n.done?u(n.value):(t=n.value,t instanceof r?t:new r((function(n){n(t)}))).then(o,a)}c((e=e.apply(n,t||[])).next())}))}function a(n,t){var r,e,u,i,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,e&&(u=2&i[0]?e.return:i[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,i[1])).done)return u;switch(e=0,u&&(i=[2&i[0],u.value]),i[0]){case 0:case 1:u=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,e=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(u=o.trys,(u=u.length>0&&u[u.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!u||i[1]>u[0]&&i[1]<u[3])){o.label=i[1];break}if(6===i[0]&&o.label<u[1]){o.label=u[1],u=i;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(i);break}u[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(n,o)}catch(n){i=[6,n],e=0}finally{r=u=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function c(n,t,r){if(r||2===arguments.length)for(var e,u=0,i=t.length;u<i;u++)!e&&u in t||(e||(e=Array.prototype.slice.call(t,0,u)),e[u]=t[u]);return n.concat(e||Array.prototype.slice.call(t))}var s=r.z.union([r.z.number(),r.z.string(),r.z.boolean(),r.z.null()]),f=r.z.lazy((function(){return r.z.array(p)})),l=r.z.lazy((function(){return r.z.record(p)})),p=r.z.union([s,f,l]),h={E:Math.E,LN10:Math.LN10,LN2:Math.LN2,LOG10E:Math.LOG10E,LOG2E:Math.LOG2E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2},d={"**":{alias:"pow"},"*":{alias:"mul"},"/":{alias:"div"},"%":{alias:"mod"},"+":{alias:"add"},"-":{alias:"sub"},">>>":{alias:"bitwiseRightShiftUnsigned"},"<<":{alias:"bitwiseLeftShift"},">>":{alias:"bitwiseRightShift"},"<=":{alias:"lte"},">=":{alias:"gte"},"<":{alias:"lt"},">":{alias:"gt"},"===":{alias:"eq"},"!==":{alias:"neq"},"==":{alias:"eq"},"!=":{alias:"neq"},"&":{alias:"bitwiseAnd"},"^":{alias:"bitwiseXor"},"|":{alias:"bitwiseOr"},"&&":{alias:"and"},"||":{alias:"or"},":=":{alias:"setVar"},"+=":{alias:"setAdd"},"-=":{alias:"setSub"},"/=":{alias:"setDiv"},"*=":{alias:"setMul"},"??":{alias:"nullCoalesce"}},v={"+":{alias:"number"},"-":{alias:"negate"},"~":{alias:"bitwiseNot"},"!":{alias:"not"}},y=function(n){return Z(/^\s+/,n)},b=W(/^('[^'\\]*(?:\\.[^'\\]*)*')/,/^("[^"\\]*(?:\\.[^"\\]*)*")/),g=W(/^((?:[0-9]+\.?[0-9]*|\.[0-9]+)(?:[eE][-+]?[0-9]+)?)\b/,/^(0[xX][0-9a-fA-F]+)\b/),m=/^(null)\b/,w=/^(true|false)\b/,x=/^([a-zA-Z_$][a-zA-Z0-9_$.]*)/,M=/^((?:\$(?!{)|\\.|[^`$\\])+)/,A=["**",W("*","/","%"),W("+","-"),W(">>>","<<",">>"),W("<=",">=","<",">"),W("===","!==","==","!="),/^&(?!&)/,"^",/^\|(?!\|)/,"&&","||","??",W(":=","+=","-=","*=","/=")],N=/^__proto__|prototype|constructor$/;function E(n){var t=this,r=n.funcs,e=n.binops,c=n.unops,s=n.seed,f=void 0===s?"expreval":s,l=n.get,p=n.set,h=n.call,y={};return{rng:u.default(f),funcs:i(i({},_),r),binops:i(i({},d),e),unops:i(i({},v),c),get:function(n,r){return o(t,void 0,void 0,(function(){var t,e;return a(this,(function(u){switch(u.label){case 0:return r.match(N)?[2,0]:l?[4,l(n,r)]:[3,2];case 1:return[2,null!==(t=u.sent())&&void 0!==t?t:null];case 2:return[2,null!==(e=y[r])&&void 0!==e?e:null]}}))}))},set:function(n,r,e){return o(t,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return r.match(N)?[2]:p?[4,p(n,r,e)]:[3,2];case 1:return[2,t.sent()];case 2:return y[r]=e,[2]}}))}))},call:h}}function O(n,t,r){return void 0===t&&(t=E({})),void 0===r&&(r={}),o(this,void 0,void 0,(function(){var e;return a(this,(function(u){switch(u.label){case 0:return e={},[4,j(S(n),t,r)];case 1:return[2,(e.result=u.sent(),e.ctx=t,e)]}}))}))}function S(n){return function(n,t,r){void 0===t&&(t=0);void 0===r&&(r=!1);return function(e){if("string"!=typeof e)throw new Error("Parsing function expects a string input");var u=function(n,t){void 0===t&&(t=0);return{text:n,ignore:[],stack:[],sp:0,lastSeen:D(n,t,{pos:0,line:1,column:1}),pos:t}}(e,t),i=n(u);if(u===i||!r&&i.pos<e.length)throw new Error("Unexpected token at ".concat(u.lastSeen.line,":").concat(u.lastSeen.column,". Remainder: ").concat(e.slice(u.lastSeen.pos)));return u.stack[0]}}(en)(n.replace(/\/\/.*\n/g,""))}function j(n,t,r){var e;return void 0===t&&(t=E({})),o(this,void 0,void 0,(function(){var u,i,s,f,l,p,h,d,v,y,b,g,m,w,x,M,A,N,E,O,S,L,z,P,T,q,$,_,D,U=this;return a(this,(function(F){switch(F.label){case 0:switch(n.type){case"Literal":return[3,1];case"Identifier":return[3,2];case"CallExpression":return[3,4];case"BinaryExpression":return[3,15];case"ConditionalExpression":return[3,16];case"UnaryExpression":return[3,21];case"TemplateLiteral":return[3,22];case"ComputedProperty":return[3,28];case"ArrayLiteral":return[3,30];case"ObjectLiteral":return[3,32]}return[3,40];case 1:return[2,n.value];case 2:return[4,t.get(r,n.name)];case 3:return[2,void 0!==(u=F.sent())?u:n.name];case 4:return i=Object.keys(t.funcs).includes(n.callee.name)?t.funcs[n.callee.name]:null,s=[],i&&i.assignment&&n.arguments.length>1?(f=null!==(e=C(n.arguments[0]))&&void 0!==e?e:"",l=n.arguments.slice(1),h=(p=s.push).apply,d=[s],v=[[f]],[4,R(l,(function(n){return o(U,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,j(n,t,r)];case 1:return[2,e.sent()]}}))}))}))]):[3,6];case 5:return h.apply(p,d.concat([c.apply(void 0,v.concat([F.sent(),!1]))])),[3,8];case 6:return b=(y=s.push).apply,g=[s],[4,R(n.arguments,(function(n){return o(U,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,j(n,t,r)];case 1:return[2,e.sent()]}}))}))}))];case 7:b.apply(y,g.concat([F.sent()])),F.label=8;case 8:return i?i.async?[4,i.f.apply(i,c([t,r],s,!1))]:[3,10]:[3,12];case 9:return m=F.sent(),[3,11];case 10:m=i.f.apply(i,c([t,r],s,!1)),F.label=11;case 11:return[2,m];case 12:return t.call?[4,t.call(t,r,n.callee.name,s)]:[3,14];case 13:return[2,F.sent()];case 14:throw new Error("Function not found: '".concat(n.callee.name,"'"));case 15:if(w=Object.keys(t.binops).includes(n.operator)?t.binops[n.operator]:null)return[2,j({type:"CallExpression",callee:{name:w.alias,type:"Identifier"},arguments:[n.left,n.right]},t,r)];throw new Error("Operator not found: '".concat(n.operator,"'"));case 16:return[4,j(n.test,t,r)];case 17:return k(F.sent())?[4,j(n.consequent,t,r)]:[3,19];case 18:return[2,F.sent()];case 19:return n.alternate?[4,j(n.alternate,t,r)]:[2,null];case 20:return[2,F.sent()];case 21:if(x=Object.keys(t.unops).includes(n.operator)?t.unops[n.operator]:null)return[2,j({type:"CallExpression",callee:{name:x.alias,type:"Identifier"},arguments:[n.argument]},t,r)];throw new Error("Operator not found: '".concat(n.operator,"'"));case 22:M="",L=0,F.label=23;case 23:return L<n.parts.length?(A=n.parts[L],N=A[0],E=A[1],"chunks"!==N?[3,24]:(M+=E,[3,26])):[3,27];case 24:return"expression"!==N?[3,26]:(O=M,[4,j(E,t,r)]);case 25:M=O+(F.sent()+""),F.label=26;case 26:return L++,[3,23];case 27:return[2,M];case 28:return[4,j(n.expression,t,r)];case 29:return[2,F.sent()];case 30:return[4,R(n.elements,(function(n){return o(U,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,j(n,t,r)];case 1:return[2,e.sent()]}}))}))}))];case 31:return[2,F.sent()];case 32:S={},L=0,F.label=33;case 33:return L<n.properties.length?(z=n.properties[L],P=z.name,T=z.value,q="","ComputedProperty"!==P.type?[3,35]:($=I,[4,j(P.expression,t,r)])):[3,39];case 34:return q=$.apply(void 0,[F.sent()]),[3,36];case 35:"Identifier"===P.type?q=P.name:"Literal"===P.type&&(q=P.value),F.label=36;case 36:return _=S,D=q,[4,j(T||P,t,r)];case 37:_[D]=F.sent(),F.label=38;case 38:return L++,[3,33];case 39:return[2,S];case 40:throw console.info(n),new Error("Syntax error")}}))}))}function C(n){return"Identifier"===n.type?n.name:null}function L(n,t){return void 0===t&&(t=0),"number"==typeof n?isNaN(n)?t:n:"string"==typeof n?n.includes(".")?parseFloat(n):parseInt(n):t}function k(n){return!!n&&(("string"!=typeof n||!n.match(/^\s+$/))&&("false"!==n&&"0"!==n))}function I(n,t){return void 0===t&&(t=10),"number"==typeof n?n.toString(t):!0===n||"true"===n?"true":n?n+"":""}function z(n){return n&&n&&"object"==typeof n?n:{}}function P(n){return n?Array.isArray(n)?n.map((function(n){return T(n)})):n&&"object"==typeof n?Object.keys(n).map((function(t){return T(n[t])})):"number"==typeof n||"string"==typeof n||"boolean"==typeof n?[n]:[]:[]}function T(n,t){return"number"==typeof n||"string"==typeof n||"boolean"==typeof n?n:n?"object"==typeof n?"":n+"":null}function R(n,t){return o(this,void 0,void 0,(function(){var r,e,u;return a(this,(function(i){switch(i.label){case 0:r=[],e=0,i.label=1;case 1:return e<n.length?[4,t(n[e],e,n)]:[3,4];case 2:u=i.sent(),r.push(u),i.label=3;case 3:return e++,[3,1];case 4:return[2,r]}}))}))}function q(n,t,r,e){return o(this,void 0,void 0,(function(){var u;return a(this,(function(i){switch(i.label){case 0:return u=I(r),[4,n.set(t,u,e)];case 1:return i.sent(),[2,e]}}))}))}function $(n,t,r){var e;return o(this,void 0,void 0,(function(){return a(this,(function(u){switch(u.label){case 0:return[4,n.get(t,r+"")];case 1:return[2,null!==(e=u.sent())&&void 0!==e?e:null]}}))}))}var _={do:{f:function(n,t){for(var r,e=[],u=2;u<arguments.length;u++)e[u-2]=arguments[u];return null!==(r=e[e.length-1])&&void 0!==r?r:null}},present:{f:function(n,t,r){return!!r}},empty:{f:function(n,t,r){return Array.isArray(r)?r.length<1:r&&"object"==typeof r?Object.keys(r).length<1:!r}},blank:{f:function(n,t,r){return Array.isArray(r)?r.length<1:r&&"object"==typeof r?Object.keys(r).length<1:!("string"!=typeof r||r&&!r.match(/^\s+$/))||!r}},setVar:{assignment:!0,async:!0,f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return a(this,(function(u){switch(u.label){case 0:return[4,q(n,t,r,e)];case 1:return[2,u.sent()]}}))}))}},setAdd:{assignment:!0,async:!0,f:function(n,t,r,e){return o(this,void 0,void 0,(function(){var u;return a(this,(function(i){switch(i.label){case 0:return[4,$(n,t,r)];case 1:return"string"!=typeof(u=i.sent())?[3,3]:[4,q(n,t,r,u+e+"")];case 2:case 4:return[2,i.sent()];case 3:return[4,q(n,t,r,L(u)+L(e))]}}))}))}},setSub:{assignment:!0,async:!0,f:function(n,t,r,e){return o(this,void 0,void 0,(function(){var u,i,o;return a(this,(function(a){switch(a.label){case 0:return u=q,i=[n,t,r],o=L,[4,$(n,t,r)];case 1:return[4,u.apply(void 0,i.concat([o.apply(void 0,[a.sent()])-L(e)]))];case 2:return[2,a.sent()]}}))}))}},setMul:{assignment:!0,async:!0,f:function(n,t,r,e){return o(this,void 0,void 0,(function(){var u,i,o;return a(this,(function(a){switch(a.label){case 0:return u=q,i=[n,t,r],o=L,[4,$(n,t,r)];case 1:return[4,u.apply(void 0,i.concat([o.apply(void 0,[a.sent()])*L(e)]))];case 2:return[2,a.sent()]}}))}))}},setDiv:{assignment:!0,async:!0,f:function(n,t,r,e){return o(this,void 0,void 0,(function(){var u,i,o;return a(this,(function(a){switch(a.label){case 0:return u=q,i=[n,t,r],o=L,[4,$(n,t,r)];case 1:return[4,u.apply(void 0,i.concat([o.apply(void 0,[a.sent()])/L(e)]))];case 2:return[2,a.sent()]}}))}))}},nullCoalesce:{f:function(n,t,r,e){return null!=r?r:e}},unixTimestampNow:{f:function(){return Date.now()}},unixTimestampForDate:{f:function(n,t,r,e,u,i,o,a){return new Date(L(r),L(e),L(u),L(i),L(o),L(a)).getTime()}},all:{f:function(n,t,r){if(!Array.isArray(r))return!!r;for(var e=0;e<r.length;e++)if(!r[e])return!1;return!0}},any:{f:function(n,t,r){if(!Array.isArray(r))return!!r;for(var e=0;e<r.length;e++)if(r[e])return!0;return!1}},some:{f:function(n,t,r){return!!_.any.f(n,t,r)}},none:{f:function(n,t,r){return!_.any.f(n,t,r)}},or:{f:function(n,t,r,e){return k(r)||k(e)}},and:{f:function(n,t,r,e){return k(r)&&k(e)}},not:{f:function(n,t,r){return!k(r)}},gt:{f:function(n,t,r,e){return L(r)>L(e)}},gte:{f:function(n,t,r,e){return L(r)>L(e)}},lt:{f:function(n,t,r,e){return L(r)>L(e)}},lte:{f:function(n,t,r,e){return L(r)>L(e)}},eq:{f:function(n,t,r,e){return I(r)===I(e)}},neq:{f:function(n,t,r,e){return I(r)!==I(e)}},rand:{f:function(n){return n.rng()}},randInRange:{f:function(n,t,r,e){return n.rng()*(Number(e)-Number(r))+Number(r)}},randInt:{f:function(n){return Math.floor(10*n.rng())}},randIntInRange:{f:function(n,t,r,e){return r=Math.ceil(Number(r)),e=Math.floor(Number(e)),Math.floor(n.rng()*(e-r+1))+r}},number:{f:function(n,t,r){return Number(r)}},bitwiseOr:{f:function(n,t,r,e){return Number(r)|Number(e)}},bitwiseXor:{f:function(n,t,r,e){return Number(r)^Number(e)}},bitwiseAnd:{f:function(n,t,r,e){return Number(r)&Number(e)}},bitwiseNot:{f:function(n,t,r){return~Number(r)}},bitwiseLeftShift:{f:function(n,t,r,e){return Number(r)<<Number(e)}},bitwiseRightShift:{f:function(n,t,r,e){return Number(r)>>Number(e)}},bitwiseRightshiftUnsigned:{f:function(n,t,r,e){return Number(r)>>>Number(e)}},negate:{f:function(n,t,r){return-L(r)}},add:{f:function(n,t,r,e){return"string"==typeof r?r+e+"":L(r)+L(e)}},sub:{f:function(n,t,r,e){return L(r)-L(e)}},div:{f:function(n,t,r,e){return L(r)/L(e)}},mul:{f:function(n,t,r,e){return L(r)*L(e)}},mod:{f:function(n,t,r,e){return L(r)%L(e)}},pow:{f:function(n,t,r,e){return Math.pow(L(r),L(e))}},abs:{f:function(n,t,r){return Math.abs(L(r))}},acos:{f:function(n,t,r){return Math.acos(L(r))}},acosh:{f:function(n,t,r){return Math.acosh(L(r))}},asin:{f:function(n,t,r){return Math.asin(L(r))}},asinh:{f:function(n,t,r){return Math.asinh(L(r))}},atan:{f:function(n,t,r){return Math.atan(L(r))}},atan2:{f:function(n,t,r,e){return Math.atan2(L(r),L(e))}},atanh:{f:function(n,t,r){return Math.atanh(L(r))}},cbrt:{f:function(n,t,r){return Math.cbrt(L(r))}},ceil:{f:function(n,t,r){return Math.ceil(L(r))}},cos:{f:function(n,t,r){return Math.cos(L(r))}},cosh:{f:function(n,t,r){return Math.cosh(L(r))}},exp:{f:function(n,t,r){return Math.exp(L(r))}},floor:{f:function(n,t,r){return Math.floor(L(r))}},hypot:{f:function(n,t,r){return Math.hypot(L(r))}},log:{f:function(n,t,r){return Math.log(L(r))}},log10:{f:function(n,t,r){return Math.log10(L(r))}},log2:{f:function(n,t,r){return Math.log2(L(r))}},max:{f:function(n,t,r){return Math.max(L(r))}},min:{f:function(n,t,r){return Math.min(L(r))}},round:{f:function(n,t,r){return Math.round(L(r))}},sign:{f:function(n,t,r){return Math.sign(L(r))}},sin:{f:function(n,t,r){return Math.sin(L(r))}},sinh:{f:function(n,t,r){return Math.sinh(L(r))}},sqrt:{f:function(n,t,r){return Math.sqrt(L(r))}},tan:{f:function(n,t,r){return Math.tan(L(r))}},tanh:{f:function(n,t,r){return Math.tanh(L(r))}},trunc:{f:function(n,t,r){return Math.trunc(L(r))}},fromCharCode:{f:function(n,t,r){return String.fromCharCode(Number(r))}},fromCodePoint:{f:function(n,t,r){return String.fromCodePoint(Number(r))}},parseInt:{f:function(n,t,r,e){return parseInt(I(r),Number(e))}},parseFloat:{f:function(n,t,r){return parseFloat(I(r))}},charAt:{f:function(n,t,r,e){return I(r).charAt(Number(e))}},charCodeAt:{f:function(n,t,r,e){return I(r).charCodeAt(Number(e))}},codePointAt:{f:function(n,t,r,e){var u;return null!==(u=I(r).codePointAt(Number(e)))&&void 0!==u?u:0}},localeCompare:{f:function(n,t,r,e){return I(r).localeCompare(I(e))}},match:{f:function(n,t,r,e){return!!I(r).match(I(e))}},matchAll:{f:function(n,t,r,e){return!!I(r).match(I(e))}},padEnd:{f:function(n,t,r,e,u){return I(r).padEnd(Number(e),I(null!=u?u:""))}},padStart:{f:function(n,t,r,e,u){return I(r).padStart(Number(e),I(null!=u?u:""))}},repeat:{f:function(n,t,r,e){return I(r).repeat(Number(e))}},replace:{f:function(n,t,r,e,u){return I(r).replace(I(e),I(u))}},replaceAll:{f:function(n,t,r,e,u){return I(r).replaceAll(I(e),I(u))}},startsWith:{f:function(n,t,r,e){return I(r).startsWith(I(e))}},substring:{f:function(n,t,r,e,u){return I(r).substring(Number(e),Number(u))}},toLowerCase:{f:function(n,t,r){return I(r).toLowerCase()}},toUpperCase:{f:function(n,t,r){return I(r).toUpperCase()}},trim:{f:function(n,t,r){return I(r).trim()}},trimEnd:{f:function(n,t,r){return I(r).trimEnd()}},trimStart:{f:function(n,t,r){return I(r).trimStart()}},clamp:{f:function(n,t,r,e){return un(L(t),L(r),L(e))}},avg:{f:function(n,t){return on(P(t).map((function(n){return L(n)})))}},sum:{f:function(n,t){return an(P(t).map((function(n){return L(n)})))}},join:{f:function(n,t,r,e){return P(r).join(I(e))}},split:{f:function(n,t,r,e){return I(r).split(I(e))}},first:{f:function(n,t,r){var e,u;return"string"==typeof r?null!==(e=r[0])&&void 0!==e?e:null:null!==(u=P(r)[0])&&void 0!==u?u:null}},last:{f:function(n,t,r){var e,u;return"string"==typeof r?null!==(e=r[r.length])&&void 0!==e?e:null:null!==(u=(r=P(r))[r.length])&&void 0!==u?u:null}},length:{f:function(n,t,r){return"string"==typeof r?r.length:P(r).length}},concat:{f:function(n,t,r,e){return"string"==typeof r?r+I(e):c(c([],P(r),!0),P(e),!0)}},endsWith:{f:function(n,t,r,e,u){return void 0===u&&(u=""),Array.isArray(r)&&(r=r.join(I(u))),I(r).endsWith(I(e))}},includes:{f:function(n,t,r,e){return"string"==typeof r?r.includes(I(e)):P(r).includes(e)}},lastIndexOf:{f:function(n,t,r,e){return"string"==typeof r?r.lastIndexOf(I(e)):P(r).lastIndexOf(e)}},indexOf:{f:function(n,t,r,e){return"string"==typeof r?r.indexOf(I(e)):P(r).indexOf(e)}},nth:{f:function(n,t,r,e){var u,i;return"string"==typeof r?null!==(u=r[L(e)])&&void 0!==u?u:null:null!==(i=P(r)[L(e)])&&void 0!==i?i:null}},reverse:{f:function(n,t,r){return"string"==typeof r?r.split("").reverse().join(""):P(r).reverse()}},take:{f:function(n,t,r,e){return"string"==typeof r?r.slice(0,L(e)):P(r).slice(0,L(e))}},head:{f:function(n,t,r){return P(r).slice(0,-1)}},tail:{f:function(n,t,r){return P(r).slice(1)}},slice:{f:function(n,t,r,e,u){return"string"==typeof r?r.slice(L(e),L(u)):P(r).slice(L(e),L(u))}},randEl:{f:function(n,t,r){var e;return null!==(e=(r=P(r))[_.randIntInRange.f(n,t,0,r.length-1)])&&void 0!==e?e:null}},push:{f:function(n,t,r,e){return Array.isArray(r)?(r.push(e),r.length):-1}},pop:{f:function(n,t,r){var e;return Array.isArray(r)&&null!==(e=r.pop())&&void 0!==e?e:null}},shift:{f:function(n,t,r){var e;return Array.isArray(r)&&null!==(e=r.shift())&&void 0!==e?e:null}},unshift:{f:function(n,t,r,e){return Array.isArray(r)?(r.unshift(e),r.length):-1}},keys:{f:function(n,t,r){return Object.keys(z(r))}},values:{f:function(n,t,r){return Object.values(z(r))}},get:{f:function(n,t,r,e){var u;return null!==(u=z(r)[I(e)])&&void 0!==u?u:null}},set:{f:function(n,t,r,e,u){return r&&"object"==typeof r&&(r[I(e)]=u),r}}};function D(n,t,r){for(var e=r.pos,u=r.line,i=r.column;e<t;){"\n"===n[e++]?(i=1,u++):i++}return{pos:e,line:u,column:i}}var U=function(n){n.pos>n.lastSeen.pos&&Object.assign(n.lastSeen,D(n.text,n.pos,n.lastSeen))};function F(n){if("function"==typeof n)return n;if(n instanceof RegExp)return t=n,function(n){U(n);var r=t.exec(n.text.substring(n.pos));if(!r)return n;for(var e=i(i({},n),{pos:n.pos+r[0].length}),u=1;u<r.length;u++)n.stack[e.sp++]=r[u];return e};var t;if("string"==typeof n)return function(n){return function(t){return U(t),t.text.startsWith(n,t.pos)?i(i({},t),{pos:t.pos+n.length}):t}}(n);throw new Error("Invalid rule")}function Z(n,t){return t=F(t),n&&(n=Z(null,Q(n))),function(r){var e=n?n(r):r;r.ignore.push(n);var u=t(e);return r.ignore.pop(),u===e?r:n?n(u):u}}var B=function(n){if(!n.ignore.length)return n;var t=n.ignore[n.ignore.length-1];return t?t(n):n};function G(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n=n.map(F),function(t){for(var r=t,e=0;e<n.length;e++){var u=e>0?B(r):r,i=n[e](u);if(i===u)return t;(i.pos>u.pos||i.sp>u.sp)&&(r=i)}return r}}function W(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n=n.map(F),function(t){for(var r=0;r<n.length;r++){var e=n[r](t);if(e!==t)return e}return t}}function Q(n){return n=F(n),function(t){for(;;){var r=B(t),e=n(r);if(e===r)return t;t=e}}}function V(n){return n=F(n),function(t){var r=n(t);return r!==t?r:i({},t)}}function X(n,t){return n=F(n),function(r){var e=n(r);if(e===r)return r;var u=t(r.stack.slice(r.sp,e.sp),r,e);return e.sp=r.sp,null!==u&&(r.stack[e.sp++]=u),e}}var H=function(n){return V(Q(n))};function J(n,t){for(var r=n[0],e=1;e<n.length;e+=2){var u=[n[e].operator,n[e+1]],i=u[1];r=rn({type:"BinaryExpression",left:r,operator:u[0],right:i},t,{pos:i.pos+i.text.length})}return r}function K(n,t,r){for(var e=n[n.length-1],u=n.length-2;u>=0;u-=2){var i=[n[u-1],n[u].operator],o=i[0];e=rn({type:"BinaryExpression",left:o,operator:i[1],right:e},{pos:o.pos},r)}return e}var Y,nn,tn=function(n){return X(n,(function(n,t,r){return{$:t,operator:t.text.substring(t.pos,r.pos)}}))},rn=function(n,t,r){return Object.defineProperties(n,{pos:{writable:!0,configurable:!0,value:t.pos},text:{writable:!0,configurable:!0,value:(t.text||r.text).slice(t.pos,r.pos)}})},en=y((nn=function(n){return Y((function(t){return n(n)(t)}))},(Y=function(n){var t=X(x,(function(n){return{type:"Identifier",name:n[0]}})),r=X(b,(function(n){var t=n[0];return{type:"Literal",value:t.slice(1,-1),raw:t}})),e=X(g,(function(n){var t=n[0];return{type:"Literal",value:+t,raw:t}})),u=X(m,(function(n){return{type:"Literal",value:null,raw:n[0]}})),o=X(w,(function(n){var t=n[0];return{type:"Literal",value:"true"===t,raw:t}})),a=X(M,(function(n){return["chunks",n[0]]})),c=X(G("${",y(n),"}"),(function(n){return["expression",n[0]]})),s=X(Z(null,G("`",H(W(a,c)),"`")),(function(n){return{type:"TemplateLiteral",parts:n}})),f=W(r,e,u,o,s),l=G(n,H(G(",",n))),p=X(G("(",V(G(l,V(","))),")"),(function(n){return{args:n}})),h=X(W(p),(function(n,t,r){return{part:n[0],$next:r}})),d=X(G(n,H(G(",",n))),(function(n){return n.length>1?{type:"CompoundExpression",leafs:n}:n[0]})),v=W(t,r,e,X(G("[",d,"]"),(function(n){return{type:"ComputedProperty",expression:n[0]}}))),N=X(t,(function(n,t,r){var e=n[0];return rn(i(i({},e),{shortNotation:!0}),t,r)})),E=X(W(G(v,":",n),N),(function(n){return{name:n[0],value:n[1]}})),O=G(E,H(G(",",E))),S=V(G(O,V(","))),j=X(G("{",S,"}"),(function(n){return{type:"ObjectLiteral",properties:n}})),C=W(n),L=G(C,H(G(",",C))),k=X(G("[",L,"]"),(function(n){return{type:"ArrayLiteral",elements:n}})),I=X(W(f,t,k,j,G("(",d,")")),(function(n,t,r){var e=n[0];return rn(e,t,r)})),z=X(G(I,H(h)),(function(n,t,r){return n.reduce((function(n,r){var e=r.part,u=r.$next;return rn({type:"CallExpression",callee:n,arguments:e.args},t,u)}))})),P=tn(W("+","-","~","!")),T=X(G(H(P),z),(function(n,t,r){return n.reduceRight((function(n,t){var e=t.$,u=t.operator;return rn({type:"UnaryExpression",argument:n,operator:u},e,r)}))})),R=A.reduce((function(n,t){return X(G(n,H(G(tn(t),n))),"**"===t?K:J)}),T),q=X(G(R,V(G("?",n,":",n))),(function(n){var t=n[0],r=n[1],e=n[2];return r?{type:"ConditionalExpression",test:t,consequent:r,alternate:e}:t}));return X(W(q),(function(n,t,r){var e=n[0];return rn(e,t,r)}))})((function(n){return nn(nn)(n)}))));function un(n,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),n<t?t:n>r?r:n}function on(n){return n.length<1?0:an(n)/n.length}function an(n){for(var t=0,r=0;r<n.length;r++)t+=n[r];return t}n.CONSTS=h,n.STDLIB=_,n.ZExprArray=f,n.ZExprObject=l,n.ZExprScalar=s,n.ZExprValue=p,n.asyncMap=R,n.avg=on,n.clamp=un,n.createExprContext=E,n.default=O,n.evaluateExpr=O,n.executeAst=j,n.exprToIdentifier=C,n.parseExpr=S,n.sum=an,n.toArray=P,n.toBoolean=k,n.toNumber=L,n.toObject=z,n.toScalar=T,n.toString=I,Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
