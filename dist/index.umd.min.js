/*!
 * expreval v0.0.0
 * (c) Matthew Trost
 * Released under the MIT License.
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("seedrandom"),require("zod")):"function"==typeof define&&define.amd?define(["exports","seedrandom","zod"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).expreval={},n.seedrandom,n.zod)}(this,(function(n,t,r){"use strict";function e(n){if(n&&n.__esModule)return n;var t=Object.create(null);return n&&Object.keys(n).forEach((function(r){if("default"!==r){var e=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,e.get?e:{enumerable:!0,get:function(){return n[r]}})}})),t.default=n,Object.freeze(t)}var i=e(t),u=function(){return u=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},u.apply(this,arguments)};function o(n,t,r,e){return new(r||(r=Promise))((function(i,u){function o(n){try{s(e.next(n))}catch(n){u(n)}}function c(n){try{s(e.throw(n))}catch(n){u(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof r?t:new r((function(n){n(t)}))).then(o,c)}s((e=e.apply(n,t||[])).next())}))}function c(n,t){var r,e,i,u,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(c){return function(s){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,c[0]&&(o=0)),o;)try{if(r=1,e&&(i=2&c[0]?e.return:c[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,c[1])).done)return i;switch(e=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,e=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(n,o)}catch(n){c=[6,n],e=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}function s(n,t,r){if(r||2===arguments.length)for(var e,i=0,u=t.length;i<u;i++)!e&&i in t||(e||(e=Array.prototype.slice.call(t,0,i)),e[i]=t[i]);return n.concat(e||Array.prototype.slice.call(t))}var f=r.z.union([r.z.number(),r.z.string(),r.z.boolean(),r.z.null()]),a={E:Math.E,LN10:Math.LN10,LN2:Math.LN2,LOG10E:Math.LOG10E,LOG2E:Math.LOG2E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2},l={"**":{alias:"pow"},"*":{alias:"mul"},"/":{alias:"div"},"%":{alias:"mod"},"+":{alias:"add"},"-":{alias:"sub"},">>>":{alias:"bitwiseRightShiftUnsigned"},"<<":{alias:"bitwiseLeftShift"},">>":{alias:"bitwiseRightShift"},"<=":{alias:"lte"},">=":{alias:"gte"},"<":{alias:"lt"},">":{alias:"gt"},"===":{alias:"eq"},"!==":{alias:"neq"},"==":{alias:"eq"},"!=":{alias:"neq"},"&":{alias:"bitwiseAnd"},"^":{alias:"bitwiseXor"},"|":{alias:"bitwiseOr"},"&&":{alias:"and"},"||":{alias:"or"},":=":{alias:"setVar"},"+=":{alias:"setAdd"},"-=":{alias:"setSub"},"/=":{alias:"setDiv"},"*=":{alias:"setMul"},"??":{alias:"nullCoalesce"}},h={"+":{alias:"number"},"-":{alias:"negate"},"~":{alias:"bitwiseNot"},"!":{alias:"not"}},d=function(n){return B(/^\s+/,n)},v=W(/^('[^'\\]*(?:\\.[^'\\]*)*')/,/^("[^"\\]*(?:\\.[^"\\]*)*")/),p=W(/^((?:[0-9]+\.?[0-9]*|\.[0-9]+)(?:[eE][-+]?[0-9]+)?)\b/,/^(0[xX][0-9a-fA-F]+)\b/),m=/^(null)\b/,y=/^(true|false)\b/,g=/^([a-zA-Z_$][a-zA-Z0-9_$.]*(:[a-zA-Z_$]+)?)/,b=/^((?:\$(?!{)|\\.|[^`$\\])+)/,w=["**",W("*","/","%"),W("+","-"),W(">>>","<<",">>"),W("<=",">=","<",">"),W("===","!==","==","!="),/^&(?!&)/,"^",/^\|(?!\|)/,"&&","||","??",W(":=","+=","-=","*=","/=")],x=/^__proto__|prototype|constructor$/;function A(n){var t=this,r=n.funcs,e=n.binops,s=n.unops,f=n.seed,a=void 0===f?"expreval":f,d=n.get,v=n.set,p=n.call,m={};return{rng:i.default(a),funcs:u(u({},q),r),binops:u(u({},l),e),unops:u(u({},h),s),get:function(n,r){return o(t,void 0,void 0,(function(){var t,e;return c(this,(function(i){return r.match(x)?[2,0]:d?[2,null!==(t=d(n,r))&&void 0!==t?t:null]:[2,null!==(e=m[r])&&void 0!==e?e:null]}))}))},set:function(n,r,e){return o(t,void 0,void 0,(function(){return c(this,(function(t){return r.match(x)?[2]:v?[2,v(n,r,e)]:(m[r]=e,[2])}))}))},call:p}}function E(n,t,r,e){return void 0===t&&(t=A({})),void 0===r&&(r={}),void 0===e&&(e={}),o(this,void 0,void 0,(function(){var i;return c(this,(function(u){switch(u.label){case 0:return i={},[4,j(N(n,e),t,r)];case 1:return[2,(i.result=u.sent(),i.ctx=t,i)]}}))}))}function N(n,t,r){return void 0===r&&(r=sn),t[n]||(t[n]=r(n.replace(/\/\/.*\n/g,""))),t[n]}function M(n,t){switch(void 0===t&&(t=function(n){return n}),n.type){case"Literal":return t(n.raw);case"Identifier":return t(n.name);case"CallExpression":return"".concat(t(n.callee.name),"(").concat(n.arguments.map((function(n){return M(n,t)})).join(", "),")");case"BinaryExpression":return"".concat(M(n.left,t)," ").concat(n.operator," ").concat(M(n.right,t));case"ConditionalExpression":return"".concat(M(n.test,t)," ? ").concat(M(n.consequent,t)," : ").concat(M(n.alternate,t));case"UnaryExpression":return"".concat(n.operator).concat(M(n.argument,t));case"TemplateLiteral":return"`"+n.parts.map((function(n){var r=n[0],e=n[1];return"chunks"===r?e:"${"+M(e,t)+"}"})).join("")+"`";case"ComputedProperty":return"["+M(n.expression,t)+"]";case"ArrayLiteral":return"["+n.elements.map((function(n){return M(n,t)})).join(", ")+"]";case"ObjectLiteral":return"{"+n.properties.map((function(n){return n.value?"".concat(M(n.name,t),": ").concat(M(n.value,t)):"".concat(M(n.name,t))})).join(", ")+"}";case"ArrowFunction":return"(".concat(n.parameters.map((function(n){return n.name})).join(", "),") => ").concat(M(n.result,t))}}function O(n,t){return o(this,void 0,void 0,(function(){var r,e,i;return c(this,(function(u){switch(u.label){case 0:r=[],e=0,u.label=1;case 1:return e<n.length?[4,t(n[e],e,n)]:[3,4];case 2:i=u.sent(),r.push(i),u.label=3;case 3:return e++,[3,1];case 4:return[2,r]}}))}))}function j(n,t,r){var e;return void 0===t&&(t=A({})),o(this,void 0,void 0,(function(){var i,u,f,a,l,h,d,v,p,m,y,g,b,w,x,A,E,N,M,C,I,k,P,T,R,q,$,z,F=this;return c(this,(function(U){switch(U.label){case 0:switch(n.type){case"Literal":return[3,1];case"Identifier":return[3,2];case"CallExpression":return[3,4];case"BinaryExpression":return[3,13];case"ConditionalExpression":return[3,16];case"UnaryExpression":return[3,19];case"TemplateLiteral":return[3,22];case"ComputedProperty":return[3,28];case"ArrayLiteral":return[3,30];case"ObjectLiteral":return[3,32];case"ArrowFunction":return[3,40]}return[3,41];case 1:return[2,n.value];case 2:return[4,t.get(r,n.name)];case 3:return[2,void 0!==(i=U.sent())?i:n.name];case 4:return(u=Object.keys(t.funcs).includes(n.callee.name)?t.funcs[n.callee.name]:null)&&u.lazy?[4,u.f.apply(u,s([t,r],n.arguments,!1))]:[3,6];case 5:return[2,U.sent()];case 6:return f=[],u&&u.assignment&&n.arguments.length>1?(a=null!==(e=_(n.arguments[0]))&&void 0!==e?e:"",l=n.arguments.slice(1),d=(h=f.push).apply,v=[f],p=[[a]],[4,O(l,(function(n){return o(F,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,j(n,t,r)];case 1:return[2,e.sent()]}}))}))}))]):[3,8];case 7:return d.apply(h,v.concat([s.apply(void 0,p.concat([U.sent(),!1]))])),[3,10];case 8:return y=(m=f.push).apply,g=[f],[4,O(n.arguments,(function(n){return o(F,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,j(n,t,r)];case 1:return[2,e.sent()]}}))}))}))];case 9:y.apply(m,g.concat([U.sent()])),U.label=10;case 10:return u?[2,u.f.apply(u,s([t,r],f,!1))]:t.call?[4,t.call(t,r,n.callee.name,f)]:[3,12];case 11:return[2,U.sent()];case 12:throw new Error("Function not found: '".concat(n.callee.name,"'"));case 13:return(b=Object.keys(t.binops).includes(n.operator)?t.binops[n.operator]:null)?[4,j({type:"CallExpression",callee:{name:b.alias,type:"Identifier"},arguments:[n.left,n.right]},t,r)]:[3,15];case 14:return[2,U.sent()];case 15:throw new Error("Operator not found: '".concat(n.operator,"'"));case 16:return[4,j(n.test,t,r)];case 17:return S(U.sent())?[2,j(n.consequent,t,r)]:[4,j(n.alternate,t,r)];case 18:return[2,U.sent()];case 19:return(w=Object.keys(t.unops).includes(n.operator)?t.unops[n.operator]:null)?[4,j({type:"CallExpression",callee:{name:w.alias,type:"Identifier"},arguments:[n.argument]},t,r)]:[3,21];case 20:return[2,U.sent()];case 21:throw new Error("Operator not found: '".concat(n.operator,"'"));case 22:x="",I=0,U.label=23;case 23:return I<n.parts.length?(A=n.parts[I],E=A[0],N=A[1],"chunks"!==E?[3,24]:(x+=N,[3,26])):[3,27];case 24:return"expression"!==E?[3,26]:(M=x,[4,j(N,t,r)]);case 25:x=M+(U.sent()+""),U.label=26;case 26:return I++,[3,23];case 27:return[2,x];case 28:return[4,j(n.expression,t,r)];case 29:return[2,U.sent()];case 30:return[4,O(n.elements,(function(n){return o(F,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,j(n,t,r)];case 1:return[2,e.sent()]}}))}))}))];case 31:return[2,U.sent()];case 32:C={},I=0,U.label=33;case 33:return I<n.properties.length?(k=n.properties[I],P=k.name,T=k.value,R="","ComputedProperty"!==P.type?[3,35]:(q=L,[4,j(P.expression,t,r)])):[3,39];case 34:return R=q.apply(void 0,[U.sent()]),[3,36];case 35:"Identifier"===P.type?R=P.name:"Literal"===P.type&&(R=P.value),U.label=36;case 36:return $=C,z=R,[4,j(T||P,t,r)];case 37:$[z]=U.sent(),U.label=38;case 38:return I++,[3,33];case 39:return[2,C];case 40:return[2,{params:n.parameters.map((function(n){return n.name})),body:n.result}];case 41:throw console.info(n),new Error("Syntax error")}}))}))}function _(n){return"Identifier"===n.type?n.name:null}function C(n,t){return void 0===t&&(t=0),"boolean"==typeof n?n?1:0:"number"==typeof n?isNaN(n)?t:n:"string"==typeof n?n.includes(".")?parseFloat(n):parseInt(n):t}function S(n){return!!n&&(("string"!=typeof n||!n.match(/^\s+$/))&&("false"!==n&&"0"!==n))}function L(n){return"number"==typeof n?n.toString(10):!0===n||"true"===n?"true":n?n+"":""}function I(n){return n&&n&&"object"==typeof n?n:{}}function k(n){return n?Array.isArray(n)?n.map((function(n){return P(n)})):n&&"object"==typeof n?Object.keys(n).map((function(t){return P(n[t])})):"number"==typeof n||"string"==typeof n||"boolean"==typeof n?[n]:[]:[]}function P(n,t){return"number"==typeof n||"string"==typeof n||"boolean"==typeof n?n:n?"object"==typeof n?"":n+"":null}function T(n,t,r,e){return o(this,void 0,void 0,(function(){var i;return c(this,(function(u){switch(u.label){case 0:return i=L(r),[4,n.set(t,i,e)];case 1:return u.sent(),[2,e]}}))}))}function R(n,t,r){var e;return o(this,void 0,void 0,(function(){return c(this,(function(i){switch(i.label){case 0:return[4,n.get(t,r+"")];case 1:return[2,null!==(e=i.sent())&&void 0!==e?e:null]}}))}))}var q={debug:{f:function(n,t){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];return o(this,void 0,void 0,(function(){return c(this,(function(n){return console.debug.apply(console,r),[2,null]}))}))}},do:{f:function(n,t){for(var r,e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,null!==(r=e[e.length-1])&&void 0!==r?r:null]}))}))}},present:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,!!r]}))}))}},empty:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return Array.isArray(r)?[2,r.length<1]:r&&"object"==typeof r?[2,Object.keys(r).length<1]:[2,!r]}))}))}},blank:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return Array.isArray(r)?[2,r.length<1]:r&&"object"==typeof r?[2,Object.keys(r).length<1]:"string"!=typeof r||r&&!r.match(/^\s+$/)?[2,!r]:[2,!0]}))}))}},setVar:{assignment:!0,f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(i){switch(i.label){case 0:return[4,T(n,t,r,e)];case 1:return[2,i.sent()]}}))}))}},setAdd:{assignment:!0,f:function(n,t,r,e){return o(this,void 0,void 0,(function(){var i;return c(this,(function(u){switch(u.label){case 0:return[4,R(n,t,r)];case 1:return"string"!=typeof(i=u.sent())?[3,3]:[4,T(n,t,r,i+e+"")];case 2:case 4:return[2,u.sent()];case 3:return[4,T(n,t,r,C(i)+C(e))]}}))}))}},setSub:{assignment:!0,f:function(n,t,r,e){return o(this,void 0,void 0,(function(){var i,u,o;return c(this,(function(c){switch(c.label){case 0:return i=T,u=[n,t,r],o=C,[4,R(n,t,r)];case 1:return[4,i.apply(void 0,u.concat([o.apply(void 0,[c.sent()])-C(e)]))];case 2:return[2,c.sent()]}}))}))}},setMul:{assignment:!0,f:function(n,t,r,e){return o(this,void 0,void 0,(function(){var i,u,o;return c(this,(function(c){switch(c.label){case 0:return i=T,u=[n,t,r],o=C,[4,R(n,t,r)];case 1:return[4,i.apply(void 0,u.concat([o.apply(void 0,[c.sent()])*C(e)]))];case 2:return[2,c.sent()]}}))}))}},setDiv:{assignment:!0,f:function(n,t,r,e){return o(this,void 0,void 0,(function(){var i,u,o;return c(this,(function(c){switch(c.label){case 0:return i=T,u=[n,t,r],o=C,[4,R(n,t,r)];case 1:return[4,i.apply(void 0,u.concat([o.apply(void 0,[c.sent()])/C(e)]))];case 2:return[2,c.sent()]}}))}))}},nullCoalesce:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,null!=r?r:e]}))}))}},unixTimestampNow:{f:function(){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Date.now()]}))}))}},unixTimestampForDate:{f:function(n,t,r,e,i,u,s,f){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,new Date(C(r),C(e),C(i),C(u),C(s),C(f)).getTime()]}))}))}},all:{f:function(n,t,r){return o(this,void 0,void 0,(function(){var n;return c(this,(function(t){if(!Array.isArray(r))return[2,!!r];for(n=0;n<r.length;n++)if(!r[n])return[2,!1];return[2,!0]}))}))}},any:{f:function(n,t,r){return o(this,void 0,void 0,(function(){var n;return c(this,(function(t){if(!Array.isArray(r))return[2,!!r];for(n=0;n<r.length;n++)if(r[n])return[2,!0];return[2,!1]}))}))}},some:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(e){return[2,!!q.any.f(n,t,r)]}))}))}},none:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(e){return[2,!q.any.f(n,t,r)]}))}))}},or:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,S(r)||S(e)]}))}))}},and:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,S(r)&&S(e)]}))}))}},not:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,!S(r)]}))}))}},gt:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,C(r)>C(e)]}))}))}},gte:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,C(r)>C(e)]}))}))}},lt:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,C(r)>C(e)]}))}))}},lte:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,C(r)>C(e)]}))}))}},eq:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r)===L(e)]}))}))}},neq:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r)!==L(e)]}))}))}},rand:{f:function(n){return o(this,void 0,void 0,(function(){return c(this,(function(t){return[2,n.rng()]}))}))}},randInRange:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(t){return[2,n.rng()*(Number(e)-Number(r))+Number(r)]}))}))}},randInt:{f:function(n){return o(this,void 0,void 0,(function(){return c(this,(function(t){return[2,Math.floor(10*n.rng())]}))}))}},randIntInRange:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(t){return r=Math.ceil(Number(r)),e=Math.floor(Number(e)),[2,Math.floor(n.rng()*(e-r+1))+r]}))}))}},number:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Number(r)]}))}))}},isNumeric:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return"number"==typeof r?[2,!0]:"string"==typeof r?[2,hn(r)]:[2,!1]}))}))}},bitwiseOr:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Number(r)|Number(e)]}))}))}},bitwiseXor:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Number(r)^Number(e)]}))}))}},bitwiseAnd:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Number(r)&Number(e)]}))}))}},bitwiseNot:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,~Number(r)]}))}))}},bitwiseLeftShift:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Number(r)<<Number(e)]}))}))}},bitwiseRightShift:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Number(r)>>Number(e)]}))}))}},bitwiseRightshiftUnsigned:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Number(r)>>>Number(e)]}))}))}},negate:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,-C(r)]}))}))}},add:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return"string"==typeof r?[2,r+e+""]:[2,C(r)+C(e)]}))}))}},sub:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,C(r)-C(e)]}))}))}},div:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,C(r)/C(e)]}))}))}},mul:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,C(r)*C(e)]}))}))}},mod:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,C(r)%C(e)]}))}))}},pow:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.pow(C(r),C(e))]}))}))}},abs:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.abs(C(r))]}))}))}},acos:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.acos(C(r))]}))}))}},acosh:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.acosh(C(r))]}))}))}},asin:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.asin(C(r))]}))}))}},asinh:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.asinh(C(r))]}))}))}},atan:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.atan(C(r))]}))}))}},atan2:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.atan2(C(r),C(e))]}))}))}},atanh:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.atanh(C(r))]}))}))}},cbrt:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.cbrt(C(r))]}))}))}},ceil:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.ceil(C(r))]}))}))}},cos:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.cos(C(r))]}))}))}},cosh:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.cosh(C(r))]}))}))}},exp:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.exp(C(r))]}))}))}},floor:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.floor(C(r))]}))}))}},hypot:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.hypot(C(r))]}))}))}},log:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.log(C(r))]}))}))}},log10:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.log10(C(r))]}))}))}},log2:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.log2(C(r))]}))}))}},max:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.max(C(r))]}))}))}},min:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.min(C(r))]}))}))}},round:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.round(C(r))]}))}))}},sign:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.sign(C(r))]}))}))}},sin:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.sin(C(r))]}))}))}},sinh:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.sinh(C(r))]}))}))}},sqrt:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.sqrt(C(r))]}))}))}},tan:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.tan(C(r))]}))}))}},tanh:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.tanh(C(r))]}))}))}},trunc:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Math.trunc(C(r))]}))}))}},fromCharCode:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,String.fromCharCode(Number(r))]}))}))}},fromCodePoint:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,String.fromCodePoint(Number(r))]}))}))}},parseInt:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,parseInt(L(r),Number(e))]}))}))}},parseFloat:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,parseFloat(L(r))]}))}))}},charAt:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).charAt(Number(e))]}))}))}},charCodeAt:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).charCodeAt(Number(e))]}))}))}},codePointAt:{f:function(n,t,r,e){var i;return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,null!==(i=L(r).codePointAt(Number(e)))&&void 0!==i?i:0]}))}))}},localeCompare:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).localeCompare(L(e))]}))}))}},match:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,!!L(r).match(L(e))]}))}))}},matchAll:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,!!L(r).match(L(e))]}))}))}},padEnd:{f:function(n,t,r,e,i){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).padEnd(Number(e),L(null!=i?i:""))]}))}))}},padStart:{f:function(n,t,r,e,i){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).padStart(Number(e),L(null!=i?i:""))]}))}))}},repeat:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).repeat(Number(e))]}))}))}},replace:{f:function(n,t,r,e,i){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).replace(L(e),L(i))]}))}))}},replaceAll:{f:function(n,t,r,e,i){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).replaceAll(L(e),L(i))]}))}))}},startsWith:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).startsWith(L(e))]}))}))}},substring:{f:function(n,t,r,e,i){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).substring(Number(e),Number(i))]}))}))}},toLowerCase:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).toLowerCase()]}))}))}},toUpperCase:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).toUpperCase()]}))}))}},trim:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).trim()]}))}))}},trimEnd:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).trimEnd()]}))}))}},trimStart:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).trimStart()]}))}))}},clamp:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,fn(C(t),C(r),C(e))]}))}))}},avg:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,an(k(r).map((function(n){return C(n)})))]}))}))}},sum:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,ln(k(r).map((function(n){return C(n)})))]}))}))}},join:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,k(r).join(L(e))]}))}))}},split:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,L(r).split(L(e))]}))}))}},first:{f:function(n,t,r){var e,i;return o(this,void 0,void 0,(function(){return c(this,(function(n){return"string"==typeof r?[2,null!==(e=r[0])&&void 0!==e?e:null]:[2,null!==(i=k(r)[0])&&void 0!==i?i:null]}))}))}},last:{f:function(n,t,r){var e,i;return o(this,void 0,void 0,(function(){return c(this,(function(n){return"string"==typeof r?[2,null!==(e=r[r.length])&&void 0!==e?e:null]:(r=k(r),[2,null!==(i=r[r.length])&&void 0!==i?i:null])}))}))}},length:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return"string"==typeof r?[2,r.length]:[2,k(r).length]}))}))}},concat:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return"string"==typeof r?[2,r+L(e)]:[2,s(s([],k(r),!0),k(e),!0)]}))}))}},endsWith:{f:function(n,t,r,e,i){return void 0===i&&(i=""),o(this,void 0,void 0,(function(){return c(this,(function(n){return Array.isArray(r)&&(r=r.join(L(i))),[2,L(r).endsWith(L(e))]}))}))}},includes:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return"string"==typeof r?[2,r.includes(L(e))]:[2,k(r).includes(e)]}))}))}},lastIndexOf:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return"string"==typeof r?[2,r.lastIndexOf(L(e))]:[2,k(r).lastIndexOf(e)]}))}))}},indexOf:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return"string"==typeof r?[2,r.indexOf(L(e))]:[2,k(r).indexOf(e)]}))}))}},nth:{f:function(n,t,r,e){var i,u;return o(this,void 0,void 0,(function(){return c(this,(function(n){return"string"==typeof r?[2,null!==(i=r[C(e)])&&void 0!==i?i:null]:[2,null!==(u=k(r)[C(e)])&&void 0!==u?u:null]}))}))}},reverse:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return"string"==typeof r?[2,r.split("").reverse().join("")]:[2,k(r).reverse()]}))}))}},take:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return"string"==typeof r?[2,r.slice(0,C(e))]:[2,k(r).slice(0,C(e))]}))}))}},head:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,k(r).slice(0,-1)]}))}))}},tail:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,k(r).slice(1)]}))}))}},slice:{f:function(n,t,r,e,i){return o(this,void 0,void 0,(function(){return c(this,(function(n){return"string"==typeof r?[2,r.slice(C(e),C(i))]:[2,k(r).slice(C(e),C(i))]}))}))}},randEl:{f:function(n,t,r){var e;return o(this,void 0,void 0,(function(){var i;return c(this,(function(u){return r=k(r),i=q.randIntInRange.f(n,t,0,r.length-1),[2,null!==(e=r[i])&&void 0!==e?e:null]}))}))}},push:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return Array.isArray(r)?(r.push(e),[2,r.length]):[2,-1]}))}))}},pop:{f:function(n,t,r){var e;return o(this,void 0,void 0,(function(){return c(this,(function(n){return Array.isArray(r)?[2,null!==(e=r.pop())&&void 0!==e?e:null]:[2,null]}))}))}},shift:{f:function(n,t,r){var e;return o(this,void 0,void 0,(function(){return c(this,(function(n){return Array.isArray(r)?[2,null!==(e=r.shift())&&void 0!==e?e:null]:[2,null]}))}))}},unshift:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){return c(this,(function(n){return Array.isArray(r)?(r.unshift(e),[2,r.length]):[2,-1]}))}))}},keysOf:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Object.keys(I(r))]}))}))}},valuesOf:{f:function(n,t,r){return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Object.values(I(r))]}))}))}},getProperty:{f:function(n,t,r,e){var i;return o(this,void 0,void 0,(function(){return c(this,(function(n){return[2,null!==(i=I(r)[L(e)])&&void 0!==i?i:null]}))}))}},setProperty:{f:function(n,t,r,e,i){return o(this,void 0,void 0,(function(){return c(this,(function(n){return r&&"object"==typeof r&&(r[L(e)]=i),[2,r]}))}))}},map:{f:function(n,t,r,e){return o(this,void 0,void 0,(function(){var i,s,f,a=this;return c(this,(function(l){return r=k(r),(i=$(e))?(s=i.params,f=i.body,[2,O(r,(function(r,e,i){return o(a,void 0,void 0,(function(){var a,l,h,d,v;return c(this,(function(p){switch(p.label){case 0:return a=u(u({},t),((l={})[null!==(h=s[0])&&void 0!==h?h:"__element__"]=r,l[null!==(d=s[1])&&void 0!==d?d:"__index__"]=e,l[null!==(v=s[2])&&void 0!==v?v:"__collection__"]=i,l)),[4,j(f,u(u({},n),{get:function(t,r){var e;return o(this,void 0,void 0,(function(){return c(this,(function(i){switch(i.label){case 0:return void 0!==t[r]?[2,null!==(e=t[r])&&void 0!==e?e:null]:[4,n.get(t,r)];case 1:return[2,i.sent()]}}))}))}}),a)];case 1:return[2,p.sent()]}}))}))}))]):[2,r]}))}))}},filter:{f:function(n,t,r,e){var i,s,f;return o(this,void 0,void 0,(function(){var a,l,h,d,v,p,m,y,g;return c(this,(function(b){switch(b.label){case 0:if(r=k(r),!(a=$(e)))return[2,r];l=a.params,h=a.body,d=[],v=0,b.label=1;case 1:return v<r.length?(p=r[v],m=u(u({},t),((g={})[null!==(i=l[0])&&void 0!==i?i:"__element__"]=p,g[null!==(s=l[1])&&void 0!==s?s:"__index__"]=v,g[null!==(f=l[2])&&void 0!==f?f:"__collection__"]=r,g)),y=S,[4,j(h,u(u({},n),{get:function(t,r){var e;return o(this,void 0,void 0,(function(){return c(this,(function(i){switch(i.label){case 0:return void 0!==t[r]?[2,null!==(e=t[r])&&void 0!==e?e:null]:[4,n.get(t,r)];case 1:return[2,i.sent()]}}))}))}}),m)]):[3,4];case 2:y.apply(void 0,[b.sent()])&&d.push(p),b.label=3;case 3:return v++,[3,1];case 4:return[2,d]}}))}))}}};function $(n){if(n&&"object"==typeof n){var t=n,r=t.params,e=t.body;if(Array.isArray(r)&&e&&"object"==typeof e&&"string"==typeof e.type)return{body:e,params:r}}}function z(n,t,r){for(var e=r.pos,i=r.line,u=r.column;e<t;){"\n"===n[e++]?(u=1,i++):u++}return{pos:e,line:i,column:u}}var F=function(n){n.pos>n.lastSeen.pos&&Object.assign(n.lastSeen,z(n.text,n.pos,n.lastSeen))};function U(n){if("function"==typeof n)return n;if(n instanceof RegExp)return t=n,function(n){F(n);var r=t.exec(n.text.substring(n.pos));if(!r)return n;for(var e=u(u({},n),{pos:n.pos+r[0].length}),i=1;i<r.length;i++)n.stack[e.sp++]=r[i];return e};var t;if("string"==typeof n)return function(n){return function(t){return F(t),t.text.startsWith(n,t.pos)?u(u({},t),{pos:t.pos+n.length}):t}}(n);throw new Error("Invalid rule")}function B(n,t){return t=U(t),n&&(n=B(null,Q(n))),function(r){var e=n?n(r):r;r.ignore.push(n);var i=t(e);return r.ignore.pop(),i===e?r:n?n(i):i}}var D=function(n){if(!n.ignore.length)return n;var t=n.ignore[n.ignore.length-1];return t?t(n):n};function G(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n=n.map(U),function(t){for(var r=t,e=0;e<n.length;e++){var i=e>0?D(r):r,u=n[e](i);if(u===i)return t;(u.pos>i.pos||u.sp>i.sp)&&(r=u)}return r}}function W(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n=n.map(U),function(t){for(var r=0;r<n.length;r++){var e=n[r](t);if(e!==t)return e}return t}}function Q(n){return n=U(n),function(t){for(;;){var r=D(t),e=n(r);if(e===r)return t;t=e}}}function Z(n){return n=U(n),function(t){var r=n(t);return r!==t?r:u({},t)}}function X(n,t){return n=U(n),function(r){var e=n(r);if(e===r)return r;var i=t(r.stack.slice(r.sp,e.sp),r,e);return e.sp=r.sp,null!==i&&(r.stack[e.sp++]=i),e}}var V=function(n){return Z(Q(n))},H=function(n,t){return void 0===t&&(t=0),{text:n,ignore:[],stack:[],sp:0,lastSeen:z(n,t,{pos:0,line:1,column:1}),pos:t}};function J(n,t){for(var r=n[0],e=1;e<n.length;e+=2){var i=[n[e].operator,n[e+1]],u=i[1];r=on({type:"BinaryExpression",left:r,operator:i[0],right:u},t,{pos:u.pos+u.text.length})}return r}function K(n,t,r){for(var e=n[n.length-1],i=n.length-2;i>=0;i-=2){var u=[n[i-1],n[i].operator],o=u[0];e=on({type:"BinaryExpression",left:o,operator:u[1],right:e},{pos:o.pos},r)}return e}var Y,nn,tn,rn,en,un=function(n){return X(n,(function(n,t,r){return{$:t,operator:t.text.substring(t.pos,r.pos)}}))},on=function(n,t,r){return Object.defineProperties(n,{pos:{writable:!0,configurable:!0,value:t.pos},text:{writable:!0,configurable:!0,value:(t.text||r.text).slice(t.pos,r.pos)}})},cn=d((nn=function(n){return Y((function(t){return n(n)(t)}))},(Y=function(n){var t=X(g,(function(n){var t=n[0];return n.slice(1),{type:"Identifier",name:t}})),r=X(v,(function(n){var t=n[0];return{type:"Literal",value:t.slice(1,-1),raw:t}})),e=X(p,(function(n){var t=n[0];return{type:"Literal",value:+t,raw:t}})),i=X(m,(function(n){return{type:"Literal",value:null,raw:n[0]}})),o=X(y,(function(n){var t=n[0];return{type:"Literal",value:"true"===t,raw:t}})),c=X(b,(function(n){return["chunks",n[0]]})),s=X(G("${",d(n),"}"),(function(n){return["expression",n[0]]})),f=X(B(null,G("`",V(W(c,s)),"`")),(function(n){return{type:"TemplateLiteral",parts:n}})),a=W(r,e,i,o,f),l=G(n,V(G(",",n))),h=X(G("(",Z(G(l,Z(","))),")"),(function(n){return{args:n}})),x=X(W(h),(function(n,t,r){return{part:n[0],$next:r}})),A=X(G(n,V(G(",",n))),(function(n){return n.length>1?{type:"CompoundExpression",leafs:n}:n[0]})),E=W(t,r,e,X(G("[",A,"]"),(function(n){return{type:"ComputedProperty",expression:n[0]}}))),N=X(t,(function(n,t,r){var e=n[0];return on(u(u({},e),{shortNotation:!0}),t,r)})),M=X(W(G(E,":",n),N),(function(n){return{name:n[0],value:n[1]}})),O=G(M,V(G(",",M))),j=Z(G(O,Z(","))),_=X(G("{",j,"}"),(function(n){return{type:"ObjectLiteral",properties:n}})),C=W(n),S=G(C,V(G(",",C))),L=X(G("[",Z(S),"]"),(function(n){return{type:"ArrayLiteral",elements:n}})),I=X(W(a,t,L,_,G("(",A,")")),(function(n,t,r){var e=n[0];return on(e,t,r)})),k=X(G(I,V(x)),(function(n,t,r){return n.reduce((function(n,r){var e=r.part,i=r.$next;return on({type:"CallExpression",callee:n,arguments:e.args},t,i)}))})),P=un(W("+","-","~","!")),T=X(G(V(P),k),(function(n,t,r){return n.reduceRight((function(n,t){var e=t.$,i=t.operator;return on({type:"UnaryExpression",argument:n,operator:i},e,r)}))})),R=w.reduce((function(n,t){return X(G(n,V(G(un(t),n))),"**"===t?K:J)}),T),q=X(G(R,Z(G("?",n,":",n))),(function(n){var t=n[0],r=n[1],e=n[2];return r?{type:"ConditionalExpression",test:t,consequent:r,alternate:e}:t})),$=X(g,(function(n,t,r){var e=n[0];return on({type:"BoundName",name:e},t,r)})),z=X(G($,V(G(",",$))),(function(n){return n})),F=X(G("(",G(z),")"),(function(n){return n.reduce((function(n,t){return Object.assign(n,t)}),[])})),U=X(W($,F),(function(n){return n[0]})),D=X("{",(function(){throw new Error("Object literal returned from the arrow function needs to be enclosed in ()")})),Q=X(G(U,"=>",W(D,n)),(function(n){return{type:"ArrowFunction",parameters:n[0],result:n[1]}}));return X(W(Q,q),(function(n,t,r){var e=n[0];return on(e,t,r)}))})((function(n){return nn(nn)(n)})))),sn=(tn=cn,void 0===rn&&(rn=0),void 0===en&&(en=!1),function(n){if("string"!=typeof n)throw new Error("Parsing function expects a string input");var t=H(n,rn),r=tn(t);if(t===r||!en&&r.pos<n.length)throw new Error("Unexpected token at ".concat(t.lastSeen.line,":").concat(t.lastSeen.column,". Remainder: ").concat(n.slice(t.lastSeen.pos)));return t.stack[0]});function fn(n,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),n<t?t:n>r?r:n}function an(n){return n.length<1?0:ln(n)/n.length}function ln(n){for(var t=0,r=0;r<n.length;r++)t+=n[r];return t}function hn(n){return!isNaN(parseFloat(n))&&isFinite(n)}n.CONSTS=a,n.DEFAULT_PARSER=sn,n.STDLIB=q,n.ZExprScalar=f,n.avg=an,n.clamp=fn,n.createExprContext=A,n.default=E,n.evaluateExpr=E,n.executeAst=j,n.exprToIdentifier=_,n.genCode=M,n.isNumeric=hn,n.parseExpr=N,n.remapAst=function n(t,r){switch(t.type){case"Literal":case"Identifier":case"ArrowFunction":return r(t);case"CallExpression":return t.arguments=t.arguments.map((function(t){return n(t,r)})),r(t);case"BinaryExpression":return t.left=n(t.left,r),t.right=n(t.right,r),r(t);case"ConditionalExpression":return t.test=n(t.test,r),t.consequent=n(t.consequent,r),t.alternate=n(t.alternate,r),r(t);case"UnaryExpression":return t.argument=n(t.argument,r),r(t);case"TemplateLiteral":return t.parts=t.parts.map((function(t){var e=t[0],i=t[1];return"expression"===e?[e,n(i,r)]:[e,i]})),r(t);case"ComputedProperty":return t.expression=n(t.expression,r),r(t);case"ArrayLiteral":return t.elements=t.elements.map((function(t){return n(t,r)})),r(t);case"ObjectLiteral":return t.properties=t.properties.map((function(t){var e=t.name,i=t.value;return{name:n(e,r),value:i?n(i,r):i}})),r(t)}},n.rewriteCode=function(n,t,r){return M(N(n,r),t)},n.sum=ln,n.toArray=k,n.toBoolean=S,n.toNumber=C,n.toObject=I,n.toScalar=P,n.toString=L,Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
