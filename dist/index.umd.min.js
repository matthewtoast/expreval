/*!
 * expreval v0.0.0
 * (c) Matthew Trost
 * Released under the MIT License.
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("seedrandom")):"function"==typeof define&&define.amd?define(["exports","seedrandom"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).expreval={},n.seedrandom)}(this,(function(n,t){"use strict";function e(n){if(n&&n.__esModule)return n;var t=Object.create(null);return n&&Object.keys(n).forEach((function(e){if("default"!==e){var r=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(t,e,r.get?r:{enumerable:!0,get:function(){return n[e]}})}})),t.default=n,Object.freeze(t)}var r=e(t),u=function(){return u=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var u in t=arguments[e])Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=t[u]);return n},u.apply(this,arguments)};function i(n,t,e,r){return new(e||(e=Promise))((function(u,i){function o(n){try{c(r.next(n))}catch(n){i(n)}}function a(n){try{c(r.throw(n))}catch(n){i(n)}}function c(n){var t;n.done?u(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(o,a)}c((r=r.apply(n,t||[])).next())}))}function o(n,t){var e,r,u,i,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,r&&(u=2&i[0]?r.return:i[0]?r.throw||((u=r.return)&&u.call(r),0):r.next)&&!(u=u.call(r,i[1])).done)return u;switch(r=0,u&&(i=[2&i[0],u.value]),i[0]){case 0:case 1:u=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(u=o.trys,(u=u.length>0&&u[u.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!u||i[1]>u[0]&&i[1]<u[3])){o.label=i[1];break}if(6===i[0]&&o.label<u[1]){o.label=u[1],u=i;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(i);break}u[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(n,o)}catch(n){i=[6,n],r=0}finally{e=u=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function a(n,t,e){if(e||2===arguments.length)for(var r,u=0,i=t.length;u<i;u++)!r&&u in t||(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return n.concat(r||Array.prototype.slice.call(t))}var c={E:Math.E,LN10:Math.LN10,LN2:Math.LN2,LOG10E:Math.LOG10E,LOG2E:Math.LOG2E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2},s={"**":{alias:"pow"},"*":{alias:"mul"},"/":{alias:"div"},"%":{alias:"mod"},"+":{alias:"add"},"-":{alias:"sub"},">>>":{alias:"bitwiseRightShiftUnsigned"},"<<":{alias:"bitwiseLeftShift"},">>":{alias:"bitwiseRightShift"},"<=":{alias:"lte"},">=":{alias:"gte"},"<":{alias:"lt"},">":{alias:"gt"},"===":{alias:"eq"},"!==":{alias:"neq"},"==":{alias:"eq"},"!=":{alias:"neq"},"&":{alias:"bitwiseAnd"},"^":{alias:"bitwiseXor"},"|":{alias:"bitwiseOr"},"&&":{alias:"and"},"||":{alias:"or"},":=":{alias:"setVar"},"+=":{alias:"setAdd"},"-=":{alias:"setSub"},"/=":{alias:"setDiv"},"*=":{alias:"setMul"},"??":{alias:"nullCoalesce"}},f={"+":{alias:"number"},"-":{alias:"negate"},"~":{alias:"bitwiseNot"},"!":{alias:"not"}},l=function(n){return q(/^\s+/,n)},p=F(/^('[^'\\]*(?:\\.[^'\\]*)*')/,/^("[^"\\]*(?:\\.[^"\\]*)*")/),h=F(/^((?:[0-9]+\.?[0-9]*|\.[0-9]+)(?:[eE][-+]?[0-9]+)?)\b/,/^(0[xX][0-9a-fA-F]+)\b/),d=/^(null)\b/,v=/^(true|false)\b/,y=/^([a-zA-Z_$][a-zA-Z0-9_$.]*)/,b=/^((?:\$(?!{)|\\.|[^`$\\])+)/,g=["**",F("*","/","%"),F("+","-"),F(">>>","<<",">>"),F("<=",">=","<",">"),F("===","!==","==","!="),/^&(?!&)/,"^",/^\|(?!\|)/,"&&","||","??",F(":=","+=","-=","*=","/=")],m=/^__proto__|prototype|constructor$/;function w(n){var t=this,e=n.funcs,a=n.binops,c=n.unops,l=n.seed,p=void 0===l?"expreval":l,h=n.get,d=n.set,v=n.call,y={};return{rng:r.default(p),funcs:u(u({},P),e),binops:u(u({},s),a),unops:u(u({},f),c),get:function(n,e){return i(t,void 0,void 0,(function(){var t,r;return o(this,(function(u){switch(u.label){case 0:return e.match(m)?[2,0]:h?[4,h(n,e)]:[3,2];case 1:return[2,null!==(t=u.sent())&&void 0!==t?t:null];case 2:return[2,null!==(r=y[e])&&void 0!==r?r:null]}}))}))},set:function(n,e,r){return i(t,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return e.match(m)?[2]:d?[4,d(n,e,r)]:[3,2];case 1:return[2,t.sent()];case 2:return y[e]=r,[2]}}))}))},call:v}}function x(n,t,e){return void 0===t&&(t=w({})),void 0===e&&(e={}),i(this,void 0,void 0,(function(){var r;return o(this,(function(u){switch(u.label){case 0:return r={},[4,N(M(n),t,e)];case 1:return[2,(r.result=u.sent(),r.ctx=t,r)]}}))}))}function M(n){return function(n,t,e){void 0===t&&(t=0);void 0===e&&(e=!1);return function(r){if("string"!=typeof r)throw new Error("Parsing function expects a string input");var u=function(n,t){void 0===t&&(t=0);return{text:n,ignore:[],stack:[],sp:0,lastSeen:R(n,t,{pos:0,line:1,column:1}),pos:t}}(r,t),i=n(u);if(u===i||!e&&i.pos<r.length)throw new Error("Unexpected token at ".concat(u.lastSeen.line,":").concat(u.lastSeen.column,". Remainder: ").concat(r.slice(u.lastSeen.pos)));return u.stack[0]}}(K)(n.replace(/\/\/.*\n/g,""))}function N(n,t,e){var r;return void 0===t&&(t=w({})),i(this,void 0,void 0,(function(){var u,c,s,f,l,p,h,d,v,y,b,g,m,w,x,M,E,j,C,L,I,T,P,R,$,_,q,D,U,F=this;return o(this,(function(B){switch(B.label){case 0:switch(n.type){case"Literal":return[3,1];case"Identifier":return[3,2];case"CallExpression":return[3,4];case"BinaryExpression":return[3,15];case"TernaryExpression":return[3,16];case"UnaryExpression":return[3,21];case"TemplateLiteral":return[3,22];case"ComputedProperty":return[3,28];case"ArrayLiteral":return[3,30];case"ObjectLiteral":return[3,32]}return[3,40];case 1:return[2,n.value];case 2:return[4,t.get(e,n.name)];case 3:return[2,void 0!==(u=B.sent())?u:n.name];case 4:return c=Object.keys(t.funcs).includes(n.callee.name)?t.funcs[n.callee.name]:null,s=[],c&&c.assignment&&n.arguments.length>1?(f=null!==(r=O(n.arguments[0]))&&void 0!==r?r:"",l=n.arguments.slice(1),h=(p=s.push).apply,d=[s],v=[[f]],[4,k(l,(function(n){return i(F,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,N(n,t,e)];case 1:return[2,r.sent()]}}))}))}))]):[3,6];case 5:return h.apply(p,d.concat([a.apply(void 0,v.concat([B.sent(),!1]))])),[3,8];case 6:return b=(y=s.push).apply,g=[s],[4,k(n.arguments,(function(n){return i(F,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,N(n,t,e)];case 1:return[2,r.sent()]}}))}))}))];case 7:b.apply(y,g.concat([B.sent()])),B.label=8;case 8:return c?c.async?[4,c.f.apply(c,a([t,e],s,!1))]:[3,10]:[3,12];case 9:return m=B.sent(),[3,11];case 10:m=c.f.apply(c,a([t,e],s,!1)),B.label=11;case 11:return[2,m];case 12:return t.call?[4,t.call(t,e,n.callee.name,s)]:[3,14];case 13:return[2,B.sent()];case 14:throw new Error("Function not found: '".concat(n.callee.name,"'"));case 15:if(w=Object.keys(t.binops).includes(n.operator)?t.binops[n.operator]:null)return[2,N({type:"CallExpression",callee:{name:w.alias,type:"Identifier"},arguments:[n.left,n.right]},t,e)];throw new Error("Operator not found: '".concat(n.operator,"'"));case 16:return[4,N(n.test,t,e)];case 17:return A(B.sent())?[4,N(n.consequent,t,e)]:[3,19];case 18:return[2,B.sent()];case 19:return[4,N(n.alternate,t,e)];case 20:return[2,B.sent()];case 21:if(x=Object.keys(t.unops).includes(n.operator)?t.unops[n.operator]:null)return[2,N({type:"CallExpression",callee:{name:x.alias,type:"Identifier"},arguments:[n.argument]},t,e)];throw new Error("Operator not found: '".concat(n.operator,"'"));case 22:M="",T=0,B.label=23;case 23:return T<n.parts.length?(E=n.parts[T],j=E[0],C=E[1],"chunks"!==j?[3,24]:(M+=C,[3,26])):[3,27];case 24:return"expression"!==j?[3,26]:(L=M,[4,N(C,t,e)]);case 25:M=L+(B.sent()+""),B.label=26;case 26:return T++,[3,23];case 27:return[2,M];case 28:return[4,N(n.expression,t,e)];case 29:return[2,B.sent()];case 30:return[4,k(n.elements,(function(n){return i(F,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,N(n,t,e)];case 1:return[2,r.sent()]}}))}))}))];case 31:return[2,B.sent()];case 32:I={},T=0,B.label=33;case 33:return T<n.properties.length?(P=n.properties[T],R=P.name,$=P.value,_="","ComputedProperty"!==R.type?[3,35]:(q=S,[4,N(R.expression,t,e)])):[3,39];case 34:return _=q.apply(void 0,[B.sent()]),[3,36];case 35:"Identifier"===R.type?_=R.name:"Literal"===R.type&&(_=R.value),B.label=36;case 36:return D=I,U=_,[4,N($,t,e)];case 37:D[U]=B.sent(),B.label=38;case 38:return T++,[3,33];case 39:return[2,I];case 40:throw console.info(n),new Error("Syntax error")}}))}))}function O(n){return"Identifier"===n.type?n.name:null}function E(n,t){return void 0===t&&(t=0),"number"==typeof n?isNaN(n)?t:n:"string"==typeof n?n.includes(".")?parseFloat(n):parseInt(n):t}function A(n){return!!n&&(("string"!=typeof n||!n.match(/^\s+$/))&&("false"!==n&&"0"!==n))}function S(n,t){return void 0===t&&(t=10),"number"==typeof n?n.toString(t):!0===n||"true"===n?"true":n?n+"":""}function j(n){if(!n)return{};if(n&&"object"==typeof n){var t={};for(var e in n)t[e]=L(n[e]);return t}return{}}function C(n){return n?Array.isArray(n)?n.map((function(n){return L(n)})):n&&"object"==typeof n?Object.keys(n).map((function(t){return L(n[t])})):"number"==typeof n||"string"==typeof n||"boolean"==typeof n?[n]:[]:[]}function L(n,t){return void 0===t&&(t=10),"number"==typeof n?n.toString(t):"string"==typeof n||"boolean"==typeof n?n:n?"object"==typeof n?"":n+"":null}function k(n,t){return i(this,void 0,void 0,(function(){var e,r,u;return o(this,(function(i){switch(i.label){case 0:e=[],r=0,i.label=1;case 1:return r<n.length?[4,t(n[r],r,n)]:[3,4];case 2:u=i.sent(),e.push(u),i.label=3;case 3:return r++,[3,1];case 4:return[2,e]}}))}))}function I(n,t,e,r){return i(this,void 0,void 0,(function(){var u;return o(this,(function(i){switch(i.label){case 0:return u=S(e),[4,n.set(t,u,r)];case 1:return i.sent(),[2,r]}}))}))}function T(n,t,e){var r;return i(this,void 0,void 0,(function(){return o(this,(function(u){switch(u.label){case 0:return[4,n.get(t,e+"")];case 1:return[2,null!==(r=u.sent())&&void 0!==r?r:null]}}))}))}var P={do:{f:function(n,t){for(var e,r=[],u=2;u<arguments.length;u++)r[u-2]=arguments[u];return null!==(e=r[r.length-1])&&void 0!==e?e:null}},present:{f:function(n,t,e){return!!e}},empty:{f:function(n,t,e){return Array.isArray(e)?e.length<1:e&&"object"==typeof e?Object.keys(e).length<1:!e}},blank:{f:function(n,t,e){return Array.isArray(e)?e.length<1:e&&"object"==typeof e?Object.keys(e).length<1:!("string"!=typeof e||e&&!e.match(/^\s+$/))||!e}},setVar:{assignment:!0,async:!0,f:function(n,t,e,r){return i(this,void 0,void 0,(function(){return o(this,(function(u){switch(u.label){case 0:return[4,I(n,t,e,r)];case 1:return[2,u.sent()]}}))}))}},setAdd:{assignment:!0,async:!0,f:function(n,t,e,r){return i(this,void 0,void 0,(function(){var u;return o(this,(function(i){switch(i.label){case 0:return[4,T(n,t,e)];case 1:return"string"!=typeof(u=i.sent())?[3,3]:[4,I(n,t,e,u+r+"")];case 2:case 4:return[2,i.sent()];case 3:return[4,I(n,t,e,E(u)+E(r))]}}))}))}},setSub:{assignment:!0,async:!0,f:function(n,t,e,r){return i(this,void 0,void 0,(function(){var u,i,a;return o(this,(function(o){switch(o.label){case 0:return u=I,i=[n,t,e],a=E,[4,T(n,t,e)];case 1:return[4,u.apply(void 0,i.concat([a.apply(void 0,[o.sent()])-E(r)]))];case 2:return[2,o.sent()]}}))}))}},setMul:{assignment:!0,async:!0,f:function(n,t,e,r){return i(this,void 0,void 0,(function(){var u,i,a;return o(this,(function(o){switch(o.label){case 0:return u=I,i=[n,t,e],a=E,[4,T(n,t,e)];case 1:return[4,u.apply(void 0,i.concat([a.apply(void 0,[o.sent()])*E(r)]))];case 2:return[2,o.sent()]}}))}))}},setDiv:{assignment:!0,async:!0,f:function(n,t,e,r){return i(this,void 0,void 0,(function(){var u,i,a;return o(this,(function(o){switch(o.label){case 0:return u=I,i=[n,t,e],a=E,[4,T(n,t,e)];case 1:return[4,u.apply(void 0,i.concat([a.apply(void 0,[o.sent()])/E(r)]))];case 2:return[2,o.sent()]}}))}))}},nullCoalesce:{f:function(n,t,e,r){return null!=e?e:r}},unixTimestampNow:{f:function(){return Date.now()}},unixTimestampForDate:{f:function(n,t,e,r,u,i,o,a){return new Date(E(e),E(r),E(u),E(i),E(o),E(a)).getTime()}},all:{f:function(n,t,e){if(!Array.isArray(e))return!!e;for(var r=0;r<e.length;r++)if(!e[r])return!1;return!0}},any:{f:function(n,t,e){if(!Array.isArray(e))return!!e;for(var r=0;r<e.length;r++)if(e[r])return!0;return!1}},some:{f:function(n,t,e){return!!P.any.f(n,t,e)}},none:{f:function(n,t,e){return!P.any.f(n,t,e)}},or:{f:function(n,t,e,r){return A(e)||A(r)}},and:{f:function(n,t,e,r){return A(e)&&A(r)}},not:{f:function(n,t,e){return!A(e)}},gt:{f:function(n,t,e,r){return E(e)>E(r)}},gte:{f:function(n,t,e,r){return E(e)>E(r)}},lt:{f:function(n,t,e,r){return E(e)>E(r)}},lte:{f:function(n,t,e,r){return E(e)>E(r)}},eq:{f:function(n,t,e,r){return S(e)===S(r)}},neq:{f:function(n,t,e,r){return S(e)!==S(r)}},rand:{f:function(n){return n.rng()}},randInRange:{f:function(n,t,e,r){return n.rng()*(Number(r)-Number(e))+Number(e)}},randInt:{f:function(n){return Math.floor(10*n.rng())}},randIntInRange:{f:function(n,t,e,r){return e=Math.ceil(Number(e)),r=Math.floor(Number(r)),Math.floor(n.rng()*(r-e+1))+e}},number:{f:function(n,t,e){return Number(e)}},bitwiseOr:{f:function(n,t,e,r){return Number(e)|Number(r)}},bitwiseXor:{f:function(n,t,e,r){return Number(e)^Number(r)}},bitwiseAnd:{f:function(n,t,e,r){return Number(e)&Number(r)}},bitwiseNot:{f:function(n,t,e){return~Number(e)}},bitwiseLeftShift:{f:function(n,t,e,r){return Number(e)<<Number(r)}},bitwiseRightShift:{f:function(n,t,e,r){return Number(e)>>Number(r)}},bitwiseRightshiftUnsigned:{f:function(n,t,e,r){return Number(e)>>>Number(r)}},negate:{f:function(n,t,e){return-E(e)}},add:{f:function(n,t,e,r){return"string"==typeof e?e+r+"":E(e)+E(r)}},sub:{f:function(n,t,e,r){return E(e)-E(r)}},div:{f:function(n,t,e,r){return E(e)/E(r)}},mul:{f:function(n,t,e,r){return E(e)*E(r)}},mod:{f:function(n,t,e,r){return E(e)%E(r)}},pow:{f:function(n,t,e,r){return Math.pow(E(e),E(r))}},abs:{f:function(n,t,e){return Math.abs(E(e))}},acos:{f:function(n,t,e){return Math.acos(E(e))}},acosh:{f:function(n,t,e){return Math.acosh(E(e))}},asin:{f:function(n,t,e){return Math.asin(E(e))}},asinh:{f:function(n,t,e){return Math.asinh(E(e))}},atan:{f:function(n,t,e){return Math.atan(E(e))}},atan2:{f:function(n,t,e,r){return Math.atan2(E(e),E(r))}},atanh:{f:function(n,t,e){return Math.atanh(E(e))}},cbrt:{f:function(n,t,e){return Math.cbrt(E(e))}},ceil:{f:function(n,t,e){return Math.ceil(E(e))}},cos:{f:function(n,t,e){return Math.cos(E(e))}},cosh:{f:function(n,t,e){return Math.cosh(E(e))}},exp:{f:function(n,t,e){return Math.exp(E(e))}},floor:{f:function(n,t,e){return Math.floor(E(e))}},hypot:{f:function(n,t,e){return Math.hypot(E(e))}},log:{f:function(n,t,e){return Math.log(E(e))}},log10:{f:function(n,t,e){return Math.log10(E(e))}},log2:{f:function(n,t,e){return Math.log2(E(e))}},max:{f:function(n,t,e){return Math.max(E(e))}},min:{f:function(n,t,e){return Math.min(E(e))}},round:{f:function(n,t,e){return Math.round(E(e))}},sign:{f:function(n,t,e){return Math.sign(E(e))}},sin:{f:function(n,t,e){return Math.sin(E(e))}},sinh:{f:function(n,t,e){return Math.sinh(E(e))}},sqrt:{f:function(n,t,e){return Math.sqrt(E(e))}},tan:{f:function(n,t,e){return Math.tan(E(e))}},tanh:{f:function(n,t,e){return Math.tanh(E(e))}},trunc:{f:function(n,t,e){return Math.trunc(E(e))}},fromCharCode:{f:function(n,t,e){return String.fromCharCode(Number(e))}},fromCodePoint:{f:function(n,t,e){return String.fromCodePoint(Number(e))}},parseInt:{f:function(n,t,e,r){return parseInt(S(e),Number(r))}},parseFloat:{f:function(n,t,e){return parseFloat(S(e))}},charAt:{f:function(n,t,e,r){return S(e).charAt(Number(r))}},charCodeAt:{f:function(n,t,e,r){return S(e).charCodeAt(Number(r))}},codePointAt:{f:function(n,t,e,r){var u;return null!==(u=S(e).codePointAt(Number(r)))&&void 0!==u?u:0}},localeCompare:{f:function(n,t,e,r){return S(e).localeCompare(S(r))}},match:{f:function(n,t,e,r){return!!S(e).match(S(r))}},matchAll:{f:function(n,t,e,r){return!!S(e).match(S(r))}},padEnd:{f:function(n,t,e,r,u){return S(e).padEnd(Number(r),S(null!=u?u:""))}},padStart:{f:function(n,t,e,r,u){return S(e).padStart(Number(r),S(null!=u?u:""))}},repeat:{f:function(n,t,e,r){return S(e).repeat(Number(r))}},replace:{f:function(n,t,e,r,u){return S(e).replace(S(r),S(u))}},replaceAll:{f:function(n,t,e,r,u){return S(e).replaceAll(S(r),S(u))}},startsWith:{f:function(n,t,e,r){return S(e).startsWith(S(r))}},substring:{f:function(n,t,e,r,u){return S(e).substring(Number(r),Number(u))}},toLowerCase:{f:function(n,t,e){return S(e).toLowerCase()}},toUpperCase:{f:function(n,t,e){return S(e).toUpperCase()}},trim:{f:function(n,t,e){return S(e).trim()}},trimEnd:{f:function(n,t,e){return S(e).trimEnd()}},trimStart:{f:function(n,t,e){return S(e).trimStart()}},clamp:{f:function(n,t,e,r){return Y(E(t),E(e),E(r))}},avg:{f:function(n,t){return nn(C(t).map((function(n){return E(n)})))}},sum:{f:function(n,t){return tn(C(t).map((function(n){return E(n)})))}},join:{f:function(n,t,e,r){return C(e).join(S(r))}},split:{f:function(n,t,e,r){return S(e).split(S(r))}},first:{f:function(n,t,e){var r,u;return"string"==typeof e?null!==(r=e[0])&&void 0!==r?r:null:null!==(u=C(e)[0])&&void 0!==u?u:null}},last:{f:function(n,t,e){var r,u;return"string"==typeof e?null!==(r=e[e.length])&&void 0!==r?r:null:null!==(u=(e=C(e))[e.length])&&void 0!==u?u:null}},length:{f:function(n,t,e){return"string"==typeof e?e.length:C(e).length}},concat:{f:function(n,t,e,r){return"string"==typeof e?e+S(r):a(a([],C(e),!0),C(r),!0)}},endsWith:{f:function(n,t,e,r,u){return void 0===u&&(u=""),Array.isArray(e)&&(e=e.join(S(u))),S(e).endsWith(S(r))}},includes:{f:function(n,t,e,r){return"string"==typeof e?e.includes(S(r)):C(e).includes(r)}},lastIndexOf:{f:function(n,t,e,r){return"string"==typeof e?e.lastIndexOf(S(r)):C(e).lastIndexOf(r)}},indexOf:{f:function(n,t,e,r){return"string"==typeof e?e.indexOf(S(r)):C(e).indexOf(r)}},nth:{f:function(n,t,e,r){var u,i;return"string"==typeof e?null!==(u=e[E(r)])&&void 0!==u?u:null:null!==(i=C(e)[E(r)])&&void 0!==i?i:null}},reverse:{f:function(n,t,e){return"string"==typeof e?e.split("").reverse().join(""):C(e).reverse()}},take:{f:function(n,t,e,r){return"string"==typeof e?e.slice(0,E(r)):C(e).slice(0,E(r))}},head:{f:function(n,t,e){return C(e).slice(0,-1)}},tail:{f:function(n,t,e){return C(e).slice(1)}},slice:{f:function(n,t,e,r,u){return"string"==typeof e?e.slice(E(r),E(u)):C(e).slice(E(r),E(u))}},randEl:{f:function(n,t,e){var r;return null!==(r=(e=C(e))[P.randIntInRange.f(n,t,0,e.length-1)])&&void 0!==r?r:null}},keys:{f:function(n,t,e){return Object.keys(j(e))}},values:{f:function(n,t,e){return Object.values(j(e))}},get:{f:function(n,t,e,r){var u;return null!==(u=j(e)[S(r)])&&void 0!==u?u:null}},set:{f:function(n,t,e,r,u){return e&&"object"==typeof e&&(e[S(r)]=u),e}}};function R(n,t,e){for(var r=e.pos,u=e.line,i=e.column;r<t;){"\n"===n[r++]?(i=1,u++):i++}return{pos:r,line:u,column:i}}var $=function(n){n.pos>n.lastSeen.pos&&Object.assign(n.lastSeen,R(n.text,n.pos,n.lastSeen))};function _(n){if("function"==typeof n)return n;if(n instanceof RegExp)return t=n,function(n){$(n);var e=t.exec(n.text.substring(n.pos));if(!e)return n;for(var r=u(u({},n),{pos:n.pos+e[0].length}),i=1;i<e.length;i++)n.stack[r.sp++]=e[i];return r};var t;if("string"==typeof n)return function(n){return function(t){return $(t),t.text.startsWith(n,t.pos)?u(u({},t),{pos:t.pos+n.length}):t}}(n);throw new Error("Invalid rule")}function q(n,t){return t=_(t),n&&(n=q(null,B(n))),function(e){var r=n?n(e):e;e.ignore.push(n);var u=t(r);return e.ignore.pop(),u===r?e:n?n(u):u}}var D=function(n){if(!n.ignore.length)return n;var t=n.ignore[n.ignore.length-1];return t?t(n):n};function U(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n=n.map(_),function(t){for(var e=t,r=0;r<n.length;r++){var u=r>0?D(e):e,i=n[r](u);if(i===u)return t;(i.pos>u.pos||i.sp>u.sp)&&(e=i)}return e}}function F(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n=n.map(_),function(t){for(var e=0;e<n.length;e++){var r=n[e](t);if(r!==t)return r}return t}}function B(n){return n=_(n),function(t){for(;;){var e=D(t),r=n(e);if(r===e)return t;t=r}}}function G(n){return n=_(n),function(t){var e=n(t);return e!==t?e:u({},t)}}function W(n,t){return n=_(n),function(e){var r=n(e);if(r===e)return e;var u=t(e.stack.slice(e.sp,r.sp),e,r);return r.sp=e.sp,null!==u&&(e.stack[r.sp++]=u),r}}var Q=function(n){return G(B(n))};function z(n,t){for(var e=n[0],r=1;r<n.length;r+=2){var u=[n[r].operator,n[r+1]],i=u[1];e=J({type:"BinaryExpression",left:e,operator:u[0],right:i},t,{pos:i.pos+i.text.length})}return e}function X(n,t,e){for(var r=n[n.length-1],u=n.length-2;u>=0;u-=2){var i=[n[u-1],n[u].operator],o=i[0];r=J({type:"BinaryExpression",left:o,operator:i[1],right:r},{pos:o.pos},e)}return r}var V,Z,H=function(n){return W(n,(function(n,t,e){return{$:t,operator:t.text.substring(t.pos,e.pos)}}))},J=function(n,t,e){return Object.defineProperties(n,{pos:{writable:!0,configurable:!0,value:t.pos},text:{writable:!0,configurable:!0,value:(t.text||e.text).slice(t.pos,e.pos)}})},K=l((Z=function(n){return V((function(t){return n(n)(t)}))},(V=function(n){var t=W(y,(function(n){return{type:"Identifier",name:n[0]}})),e=W(p,(function(n){var t=n[0];return{type:"Literal",value:t.slice(1,-1),raw:t}})),r=W(h,(function(n){var t=n[0];return{type:"Literal",value:+t,raw:t}})),u=W(d,(function(n){return{type:"Literal",value:null,raw:n[0]}})),i=W(v,(function(n){var t=n[0];return{type:"Literal",value:"true"===t,raw:t}})),o=W(b,(function(n){return["chunks",n[0]]})),a=W(U("${",l(n),"}"),(function(n){return["expression",n[0]]})),c=W(q(null,U("`",Q(F(o,a)),"`")),(function(n){return{type:"TemplateLiteral",parts:n}})),s=F(e,r,u,i,c),f=U(n,Q(U(",",n))),m=W(U("(",G(U(f,G(","))),")"),(function(n){return{args:n}})),w=W(F(m),(function(n,t,e){return{part:n[0],$next:e}})),x=W(U(n,Q(U(",",n))),(function(n){return n.length>1?{type:"CompoundExpression",leafs:n}:n[0]})),M=F(t,e,r,W(U("[",x,"]"),(function(n){return{type:"ComputedProperty",expression:n[0]}}))),N=W(F(U(M,":",n)),(function(n){return{name:n[0],value:n[1]}})),O=U(N,Q(U(",",N))),E=G(U(O,G(","))),A=W(U("{",E,"}"),(function(n){return{type:"ObjectLiteral",properties:n}})),S=F(n),j=U(S,Q(U(",",S))),C=W(U("[",j,"]"),(function(n){return{type:"ArrayLiteral",elements:n}})),L=W(F(s,t,C,A,U("(",x,")")),(function(n,t,e){var r=n[0];return J(r,t,e)})),k=W(U(L,Q(w)),(function(n,t,e){return n.reduce((function(n,e){var r=e.part,u=e.$next;return J({type:"CallExpression",callee:n,arguments:r.args},t,u)}))})),I=H(F("+","-","~","!")),T=W(U(Q(I),k),(function(n,t,e){return n.reduceRight((function(n,t){var r=t.$,u=t.operator;return J({type:"UnaryExpression",argument:n,operator:u},r,e)}))})),P=g.reduce((function(n,t){return W(U(n,Q(U(H(t),n))),"**"===t?X:z)}),T),R=W(U(P,G(U("?",n,":",n))),(function(n){var t=n[0],e=n[1],r=n[2];return e?{type:"TernaryExpression",test:t,consequent:e,alternate:r}:t}));return W(F(R),(function(n,t,e){var r=n[0];return J(r,t,e)}))})((function(n){return Z(Z)(n)}))));function Y(n,t,e){return void 0===t&&(t=0),void 0===e&&(e=1),n<t?t:n>e?e:n}function nn(n){return n.length<1?0:tn(n)/n.length}function tn(n){for(var t=0,e=0;e<n.length;e++)t+=n[e];return t}n.CONSTS=c,n.STDLIB=P,n.asyncMap=k,n.avg=nn,n.clamp=Y,n.createExprContext=w,n.default=x,n.evaluateExpr=x,n.executeAst=N,n.exprToIdentifier=O,n.parseExpr=M,n.sum=tn,n.toArray=C,n.toBoolean=A,n.toNumber=E,n.toObject=j,n.toScalar=L,n.toString=S,Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
